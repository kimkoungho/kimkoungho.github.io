# JAVA NIO

- 개념 
자바 NIO(New IO) 는 기존의 자바 IO API 를 대체하기 위해서 Java 1.4 에서 도입됨  

- 특징

- 기존 IO 와 차이점 

- 요소 

- 예제  


변화된 부분 
- channels and buffers
이전의 IO API 는 byte streams character streams 를 이용했지만 
NIO 는 channels 과 buffers 를 사용함  
데이터는 항상 채널에서 버퍼로 읽히거나 버퍼에서 채널로 쓰여짐  

- Non-blocking IO
NIO 에서는 non-blocking IO 를 사용할 수 있음  

ex) 하나의 스레드는 버퍼에 데이터를 읽도록 요청할 수 있음  
채널이 버퍼로 데이터를 읽는 동안 스레드는 다른 작업을 수행할 수 없었음 - blocking

- Selectors
자바 NIO 에는 selectors 의 개념을 포함하고 있음  
selector 는 여러 개의 채널에서 이벤트(연결 생성, 데이터 도착)를 모니터링 할 수 있는 객체  
하나의 스레드에서 여러 채널에 대해 모니터링이 가능함  

## Channels
NIO 의 가장 큰 특징은 채널 기반으로 데이터를 읽고 쓸수 있다는 것  
NIO 의 채널과 기존 IO 스트림의 차이점  
- 채널은 양방향이기 때문에 읽고 쓰기가 가능하지만 스트립은 단방향(읽기, 쓰기) 만 가능함  
- 채널은 비동기적으로 동작 가능 
- 채널은 항상 버퍼에서 읽거나 쓰기를 수행  

### Channels type
- FileChannel
파일에 데이터를 읽고 쓸 때 사용
- DatagramChannel
UDP 를 이용한 데이터를 읽고 쓸 때 사용 
- SocketChannel
TCP 를 이용한 데이터를 읽고 쓸 때 사용
- ServerSocketChannel
TCP 를 수신하고 들어오는 연결마다 SocketChannel 이 생성됨  

## Buffers
NIO 에서 버퍼는 채널과 상호 작용할 때 사용됨  
데이터는 채널에서 버퍼로 읽혀지거나 쓰여짐  
  
버퍼를 사용하여 데이터를 읽고 쓰는 프로세스 
1. 버퍼에 데이터 쓰기
2. buffer.flip()
3. 버퍼에서 데이터 읽기 
4. buffer.clear() or buffer.compact()
  
버퍼에 데이터를 쓸 때 버퍼는 쓰여진 데이터의 양을 기록함  
flip() 은 버퍼를 쓰기 모드에서 읽기 모드로 전환하는 것을 의미  
clear(), compact() 는 모든 데이터를 읽은 후에 버퍼를 지우는 작업   
ㄴ clear() : 버퍼 전체를 지우는 행위
ㄴ compact() : 이미 읽은 데이터만 지우는 행위  

### Buffer type
- ByteBuffer
- MappedByteBuffer
- CharBuffer
- ShortBuffer
- IntBuffer
- LongBuffer
- FloatBuffer
- DoubleBuffer

## Selectors
셀렉터를 사용하면 하나의 스레드가 여러 채널을 처리 할 수 있음  


## Multiplexing





## 래퍼런스 
- [Jakob의 java nio 튜토리얼](http://tutorials.jenkov.com/java-nio/index.html)
- [HomoEfficio_블로그](https://homoefficio.github.io/2016/08/06/Java-NIO%EB%8A%94-%EC%83%9D%EA%B0%81%EB%A7%8C%ED%81%BC-non-blocking-%ED%95%98%EC%A7%80-%EC%95%8A%EB%8B%A4/)
- [jongmin 블로그](https://jongmin92.github.io/2019/03/03/Java/java-nio/)
- [Medium Java IO vs New IO](https://medium.com/@nilasini/java-nio-non-blocking-io-vs-io-1731caa910a2)
